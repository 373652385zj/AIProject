{"remainingRequest":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!/Volumes/JAKY/温博老师给的任务/智能盒子(1)/src/components/Configuration/FaceCheckpointEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/src/components/Configuration/FaceCheckpointEditor.vue","mtime":1605789014000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5wYXJzZS1pbnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1ZvbHVtZXMvSkFLWS9cdTZFMjlcdTUzNUFcdTgwMDFcdTVFMDhcdTdFRDlcdTc2ODRcdTRFRkJcdTUyQTEvXHU2NjdBXHU4MEZEXHU3NkQyXHU1QjUwKDEpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVm9sdW1lcy9KQUtZL1x1NkUyOVx1NTM1QVx1ODAwMVx1NUUwOFx1N0VEOVx1NzY4NFx1NEVGQlx1NTJBMS9cdTY2N0FcdTgwRkRcdTc2RDJcdTVCNTAoMSkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVm9sdW1lcy9KQUtZL1x1NkUyOVx1NTM1QVx1ODAwMVx1NUUwOFx1N0VEOVx1NzY4NFx1NEVGQlx1NTJBMS9cdTY2N0FcdTgwRkRcdTc2RDJcdTVCNTAoMSkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gInV1aWQiOwppbXBvcnQgUHViU3ViIGZyb20gInB1YnN1Yi1qcyI7CmltcG9ydCBjb25maWcgZnJvbSAiQC9jb25maWcvY29uZmlnIjsKaW1wb3J0IGh0dHAgZnJvbSAiQC9jb25maWcvaHR0cCI7Cgp2YXIgUGFya2luZ1NwYWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBQYXJraW5nU3BhY2UoeCwgeSwgaWQsIG5hbWUsIGN0eCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhcmtpbmdTcGFjZSk7CgogICAgdGhpcy54ID0geDsKICAgIHRoaXMueSA9IHk7CiAgICB0aGlzLmlkID0gaWQ7CiAgICB0aGlzLmN0eCA9IGN0eDsKICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB0aGlzLnJhZGl1cyA9IDU7CiAgICB0aGlzLmF2YWlsYWJsZSA9IHRydWU7CiAgICB0aGlzLmhpZ2hsaWdodCA9IGZhbHNlOwogICAgdGhpcy5hdmFpbGFibGVDb3VudGVyID0gMDsKICB9CgogIF9jcmVhdGVDbGFzcyhQYXJraW5nU3BhY2UsIFt7CiAgICBrZXk6ICJpc0hvdmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0hvdmVyKG1vdXNlWCwgbW91c2VZKSB7CiAgICAgIC8vIOawtOW5s+i3neemu+aIluWeguebtOi3neemu+Wkp+S6juWNiuW+hO+8jOWImeS4gOWumuS4jeWPr+iDveaCrOWBnAogICAgICBpZiAoTWF0aC5hYnModGhpcy54IC0gbW91c2VYKSA+IHRoaXMucmFkaXVzIHx8IE1hdGguYWJzKHRoaXMueSAtIG1vdXNlWSkgPiB0aGlzLnJhZGl1cykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KCh0aGlzLnggLSBtb3VzZVgpICogKHRoaXMueCAtIG1vdXNlWCkgKyAodGhpcy55IC0gbW91c2VZKSAqICh0aGlzLnkgLSBtb3VzZVkpKTsKCiAgICAgIGlmIChkaXN0YW5jZSA+IHRoaXMucmFkaXVzKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoQXZhaWxhYmlsaXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoQXZhaWxhYmlsaXR5KGRldGVjdGlvbnMpIHsKICAgICAgdmFyIGF2YWlsYWJsZSA9IHRydWU7CiAgICAgIHZhciBzdGF0ZUNoYW5nZWQgPSBmYWxzZTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkZXRlY3Rpb25zKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGUgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHZhciBsZWZ0ID0gZVswXTsKICAgICAgICAgIHZhciB0b3AgPSBlWzFdOwogICAgICAgICAgdmFyIHJpZ2h0ID0gbGVmdCArIGVbMl07CiAgICAgICAgICB2YXIgYm90dG9tID0gdG9wICsgZVszXTsKCiAgICAgICAgICBpZiAodGhpcy55ID4gdG9wICYmIHRoaXMueSA8IGJvdHRvbSAmJiB0aGlzLnggPiBsZWZ0ICYmIHRoaXMueCA8IHJpZ2h0KSB7CiAgICAgICAgICAgIGF2YWlsYWJsZSA9IGZhbHNlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9IC8v5qih5Z6L5a655piT5oqK5pyJ6L2m6K+G5Yir5oiQ5rKh6L2m77yM5L2G5LiN5a655piT5oqK5rKh6L2m6K+G5Yir5oiQ5pyJ6L2m77yM5omA5Lul6L+e57ut6K+G5Yir5LiJ5qyh5rKh6L2m5omN5pS55Y+Y54q25oCBCgogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIGlmIChhdmFpbGFibGUpIHsKICAgICAgICB0aGlzLmF2YWlsYWJsZUNvdW50ZXIrKzsKCiAgICAgICAgaWYgKHRoaXMuYXZhaWxhYmxlQ291bnRlciA9PSAzKSB7CiAgICAgICAgICB0aGlzLmF2YWlsYWJsZSA9IHRydWU7CiAgICAgICAgICB0aGlzLmF2YWlsYWJsZUNvdW50ZXIgPSAwOwogICAgICAgICAgc3RhdGVDaGFuZ2VkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuYXZhaWxhYmxlKSBzdGF0ZUNoYW5nZWQgPSB0cnVlOwogICAgICAgIHRoaXMuYXZhaWxhYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5hdmFpbGFibGVDb3VudGVyID0gMDsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0YXRlQ2hhbmdlZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWZyZXNoRXh0ZXJpb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hFeHRlcmlvcihtb3VzZVgsIG1vdXNlWSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7CiAgICAgIHZhciBpc0hvdmVyID0gdGhpcy5pc0hvdmVyKG1vdXNlWCwgbW91c2VZKTsKICAgICAgdmFyIHJlc2l6ZUZhY3RvciA9IHRoaXMuaGlnaGxpZ2h0IHx8IGlzSG92ZXIgPyAxLjUgOiAxOwogICAgICB0aGlzLmN0eC5hcmModGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzICogcmVzaXplRmFjdG9yLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpOwoKICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpcy5oaWdobGlnaHQpIHJldHVybiAiI2ZmYTUwMCI7CiAgICAgICAgaWYgKF90aGlzLmF2YWlsYWJsZSkgcmV0dXJuICIjMDBmZjAwIjsKICAgICAgICByZXR1cm4gIiNmZjAwMDAiOwogICAgICB9KCk7CgogICAgICB0aGlzLmN0eC5maWxsKCk7CgogICAgICBpZiAoaXNIb3ZlcikgewogICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDI7CiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmF2YWlsYWJsZSA/ICIjMDAzMzAwIiA6ICIjMzMwMDAwIjsKICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBhcmtpbmdTcGFjZTsKfSgpOwoKdmFyIFBhcmtpbmdTcGFjZVN0b3JhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFBhcmtpbmdTcGFjZVN0b3JhZ2UoY3R4LCBob3N0KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFya2luZ1NwYWNlU3RvcmFnZSk7CgogICAgdGhpcy5jdHggPSBjdHg7CiAgICB0aGlzLmhvc3QgPSBob3N0OwogICAgdGhpcy5zdG9yYWdlID0gbmV3IE1hcCgpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFBhcmtpbmdTcGFjZVN0b3JhZ2UsIFt7CiAgICBrZXk6ICJsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKGRhdGEpIHsKICAgICAgZm9yICh2YXIgaWQgaW4gZGF0YSkgewogICAgICAgIHRoaXMuY3JlYXRlKGRhdGFbaWRdLngsIGRhdGFbaWRdLnksIGZhbHNlLCBpZCwgZGF0YVtpZF0ubmFtZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSh4LCB5LCBleHBvcnROZWVkZWQpIHsKICAgICAgdmFyIGlkID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBudWxsOwogICAgICB2YXIgbmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogbnVsbDsKICAgICAgdmFyIG5ld0lEID0gaWQgPT0gbnVsbCA/IHV1aWQoKSA6IGlkOwogICAgICB2YXIgbmV3TmFtZSA9IG5hbWUgPT0gbnVsbCA/IG5ld0lELnN1YnN0cmluZygwLCA1KSA6IG5hbWU7CiAgICAgIHRoaXMuc3RvcmFnZS5zZXQobmV3SUQsIG5ldyBQYXJraW5nU3BhY2UoTWF0aC5yb3VuZCh4KSwgTWF0aC5yb3VuZCh5KSwgbmV3SUQsIG5ld05hbWUsIHRoaXMuY3R4KSk7CiAgICAgIFB1YlN1Yi5wdWJsaXNoKCJjcmVhdGUiLCB7CiAgICAgICAgeDogTWF0aC5yb3VuZCh4KSwKICAgICAgICB5OiBNYXRoLnJvdW5kKHkpLAogICAgICAgIGlkOiBuZXdJRCwKICAgICAgICBuYW1lOiBuZXdOYW1lCiAgICAgIH0pOwogICAgICBpZiAoZXhwb3J0TmVlZGVkKSB0aGlzLmV4cG9ydCgpOwogICAgICByZXR1cm4gbmV3SUQ7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoZWxlbWVudCkgewogICAgICB0aGlzLnN0b3JhZ2UuZGVsZXRlKGVsZW1lbnQuaWQpOwogICAgICBQdWJTdWIucHVibGlzaCgicmVtb3ZlIiwgZWxlbWVudC5pZCk7CiAgICAgIHRoaXMuZXhwb3J0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZm9yRWFjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFjaykgewogICAgICB0aGlzLnN0b3JhZ2UuZm9yRWFjaChjYWxsYmFjayk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVmcmVzaEV4dGVyaW9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoRXh0ZXJpb3IobW91c2VYLCBtb3VzZVkpIHsKICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChwcykgewogICAgICAgIHBzLnJlZnJlc2hFeHRlcmlvcihtb3VzZVgsIG1vdXNlWSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZnJlc2hBdmFpbGFiaWxpdHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hBdmFpbGFiaWxpdHkoZGV0ZWN0aW9ucykgewogICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHBzKSB7CiAgICAgICAgdmFyIHN0YXRlQ2hhbmdlZCA9IHBzLnJlZnJlc2hBdmFpbGFiaWxpdHkoZGV0ZWN0aW9ucyk7CgogICAgICAgIGlmIChzdGF0ZUNoYW5nZWQpIHsKICAgICAgICAgIFB1YlN1Yi5wdWJsaXNoKCJjaGFuZ2UiLCB7CiAgICAgICAgICAgIGlkOiBwcy5pZCwKICAgICAgICAgICAgYXZhaWxhYmxlOiBwcy5hdmFpbGFibGUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5hbWUoaWQsIG5hbWUpIHsKICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnN0b3JhZ2UuZ2V0KGlkKTsKICAgICAgZWxlbWVudC5uYW1lID0gbmFtZTsKICAgICAgdGhpcy5zdG9yYWdlLnNldChpZCwgZWxlbWVudCk7CiAgICAgIHRoaXMuZXhwb3J0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGlnaGxpZ2h0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWdobGlnaHQoaWQpIHsKICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChwcykgewogICAgICAgIGlmIChwcy5pZCA9PSBpZCkgewogICAgICAgICAgcHMuaGlnaGxpZ2h0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHMuaGlnaGxpZ2h0ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0R1cGxpY2F0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNEdXBsaWNhdGUobmFtZSkgewogICAgICB2YXIgZHVwbGljYXRlID0gZmFsc2U7CiAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAocHMpIHsKICAgICAgICBpZiAocHMubmFtZSA9PSBuYW1lKSBkdXBsaWNhdGUgPSB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIGR1cGxpY2F0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJleHBvcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9leHBvcnQoKSB7CiAgICAgIHZhciB0ZW1wU3RvcmFnZSA9IHt9OwogICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHBzKSB7CiAgICAgICAgdGVtcFN0b3JhZ2VbcHMuaWRdID0gewogICAgICAgICAgeDogcHMueCwKICAgICAgICAgIHk6IHBzLnksCiAgICAgICAgICBuYW1lOiBwcy5uYW1lCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIGF4aW9zLnBvc3QodGhpcy5ob3N0ICsgdGhpcy5jaGVja3BvaW50c1VybCwgdGVtcFN0b3JhZ2UpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcC5jb2RlICE9PSAyMDApIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImNhbm5vdCBwb3N0IHBvaW50IGRhdGEiKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQYXJraW5nU3BhY2VTdG9yYWdlOwp9KCk7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNrZWNrcG9pbnQtZWRpdG9yIiwKICBtaXhpbnM6IFtodHRwXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy/or4bliKvnu5PmnpznlLvluIPlj4rlhbbkuIrkuIvmlocKICAgICAgZGV0ZWN0Q2FudmFzOiBudWxsLAogICAgICBkZXRlY3RDdHg6IG51bGwsCiAgICAgIC8v6L2m5L2N77yI5qOA5p+l54K577yJ5YiX6KGoCiAgICAgIHBhcmtpbmdTcGFjZVN0b3JhZ2U6IG51bGwsCiAgICAgIC8vZGV0ZWN0aW9uID0gW1t4LCB5LCB3LCBoXSwgW3gsIHksIHcsIGhdLCAuLi5dCiAgICAgIGRldGVjdGlvbnM6IG51bGwsCiAgICAgIC8v6byg5qCH5L2N572uCiAgICAgIG1vdXNlWDogMCwKICAgICAgbW91c2VZOiAwLAogICAgICAvL+aYr+WQpuWcqOe8lui+keeKtuaAgQogICAgICBlZGl0YWJsZTogZmFsc2UsCiAgICAgIC8v57yW6L6R54q25oCB55u45YWzCiAgICAgIGVkaXRNb2RlOiAiaW1tZWRpYXRlIiwKICAgICAgaW1tZWRpYXRlOiB7CiAgICAgICAgSUQ6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHN0YXRlOiBudWxsCiAgICAgIH0sCiAgICAgIGNvbnRpbnVhbHM6IHsKICAgICAgICBuZXh0OiAiMDAxIiwKICAgICAgICBzdGF0ZTogbnVsbAogICAgICB9LAogICAgICAvL+aYr+WQpui/mOWcqOWIneWni+WMlgogICAgICBwcmVwYXJpbmc6IHRydWUsCiAgICAgIGhvc3Q6IGNvbmZpZy5heGlvcy5iYXNlVVJMLAogICAgICB1cmw6ICdydHNwOi8vMTkyLjE2OC4xMzcuMTAyOjg1NTcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVuYW1lOiBmdW5jdGlvbiByZW5hbWUoKSB7CiAgICAgIGlmICh0aGlzLnBhcmtpbmdTcGFjZVN0b3JhZ2UuaXNEdXBsaWNhdGUodGhpcy5pbW1lZGlhdGUubmFtZSkpIHsKICAgICAgICB0aGlzLmltbWVkaWF0ZS5zdGF0ZSA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5pbW1lZGlhdGUuc3RhdGUgPSBudWxsOwogICAgICBQdWJTdWIucHVibGlzaCgicmVuYW1lIiwgewogICAgICAgIGlkOiB0aGlzLmltbWVkaWF0ZS5JRCwKICAgICAgICBuYW1lOiB0aGlzLmltbWVkaWF0ZS5uYW1lCiAgICAgIH0pOwogICAgfSwKICAgIGNvbnRpbnVhbHNOZXh0OiBmdW5jdGlvbiBjb250aW51YWxzTmV4dCgpIHsKICAgICAgdmFyIGRpZ2l0ID0gdGhpcy5jb250aW51YWxzLm5leHQubGVuZ3RoOwogICAgICB2YXIgbmV3TmV4dCA9ICIiLmNvbmNhdChOdW1iZXIucGFyc2VJbnQodGhpcy5jb250aW51YWxzLm5leHQpICsgMSk7CgogICAgICB3aGlsZSAobmV3TmV4dC5sZW5ndGggPCBkaWdpdCkgewogICAgICAgIG5ld05leHQgPSAiMCIuY29uY2F0KG5ld05leHQpOwogICAgICB9CgogICAgICB0aGlzLmNvbnRpbnVhbHMubmV4dCA9IG5ld05leHQ7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgLy/liJvlu7rlr7nor4bliKvnu5PmnpznlLvluIPlj4rlhbbkuIrkuIvmlofnmoTlvJXnlKgKICAgIC8vIHRoaXMuZGV0ZWN0Q2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRldGVjdENhbnZhcyIpOwogICAgLy8gdGhpcy5kZXRlY3RDYW52YXMud2lkdGggPSA3MjA7CiAgICAvLyB0aGlzLmRldGVjdENhbnZhcy5oZWlnaHQgPSA0ODA7CiAgICAvLyB0aGlzLmRldGVjdEN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZXRlY3RDYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpOwogICAgLy/liJ3lp4vljJbmo4Dmn6XngrnlgqjlrZgKICAgIHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZSA9IG5ldyBQYXJraW5nU3BhY2VTdG9yYWdlKHRoaXMuZGV0ZWN0Q3R4LCB0aGlzLmhvc3QpOyAvL+iOt+WPluacjeWKoeWZqOerr+e8k+WtmOeahOajgOafpeeCueS/oeaBrwoKICAgIHRoaXMuJGN1cmwuZ2V0KHRoaXMuY2hlY2twb2ludHNVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgIF90aGlzMi5wYXJraW5nU3BhY2VTdG9yYWdlLmxvYWQocmVzLmRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzMi4kTWVzc2FnZS53YXJuaW5nKEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICB9CiAgICB9KTsgLy8gLy/ojrflj5bor4bliKvmoYYKICAgIC8vICBheGlvcwogICAgLy8gICAgIC5nZXQoYCR7dGhpcy5ob3N0fS9jYW1lcmEvZGV0ZWN0L2JveGApCiAgICAvLyAgICAgLnRoZW4oKHJlc3ApID0+IHsKICAgIC8vICAgICAgICAgaWYgKHJlc3AuY29kZSA9PSAyMDApIHsKICAgIC8vICAgICAgICAgICAgIHRoaXMuZGV0ZWN0aW9ucyA9IHJlc3AuZGF0YTsKICAgIC8vICAgICAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgICAgIHRoaXMuZGV0ZWN0aW9ucyA9IFtdOwogICAgLy8gICAgICAgICAgICAgY29uc29sZS5lcnJvcigiY2Fubm90IGZldGNoIGRldGVjdGlvbnMiKTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgIH0pCiAgICAvLyAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgIC8vICAgICAgICAgY29uc29sZS5lcnJvcihgJHtlcnJ9YCk7CiAgICAvLyAgICAgfSk7CiAgICAvL+W9k+WbvuWDj+a6kOWuveW6puS4jeaYrzDvvIjljbPlt7LliqDovb3lpb3vvInml7blj5bmtogi5YeG5aSH5LitIumBrue9qQoKICAgIHZhciBwcmVwYXJlQ2hlY2tlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZXRlY3RTb3VyY2UiKS53aWR0aCAhPSAwKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChwcmVwYXJlQ2hlY2tlcik7CiAgICAgICAgX3RoaXMyLnByZXBhcmluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LCA1MCk7IC8v5q+PNTDmr6vnp5LliLfmlrDkuIDmrKHnlLvluIMKCiAgICB2YXIgbGFzdFJlZnJlc2hUaW1lc3RhbXAgPSAwOwoKICAgIHZhciByZWZyZXNoQ2FudmFzID0gZnVuY3Rpb24gcmVmcmVzaENhbnZhcyh0aW1lKSB7CiAgICAgIGlmICh0aW1lIC0gbGFzdFJlZnJlc2hUaW1lc3RhbXAgPiA1MCkgewogICAgICAgIGxhc3RSZWZyZXNoVGltZXN0YW1wID0gdGltZTsKICAgICAgICB2YXIgc291cmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRldGVjdFNvdXJjZSIpOwoKICAgICAgICB0cnkgewogICAgICAgICAgX3RoaXMyLmRldGVjdEN0eC5kcmF3SW1hZ2Uoc291cmNlLCAwLCAwKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgLyppZ25vcmUgd2FybmluZyovCiAgICAgICAgfQoKICAgICAgICBfdGhpczIucGFya2luZ1NwYWNlU3RvcmFnZS5yZWZyZXNoRXh0ZXJpb3IoX3RoaXMyLm1vdXNlWCwgX3RoaXMyLm1vdXNlWSk7CiAgICAgIH0KCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZWZyZXNoQ2FudmFzKTsKICAgIH07CgogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlZnJlc2hDYW52YXMpOyAvL+avjzTnp5Lojrflj5bkuIDmrKHor4bliKvmoYblubbliLfmlrDljaDnlKjmg4XlhrUKCiAgICB2YXIgbGFzdEZldGNoVGltZXN0YW1wID0gMDsgLy8gbGV0IGZldGNoRGV0ZWN0aW9uID0gYXN5bmMgKHRpbWUpID0+IHsKICAgIC8vICAgICBpZiAodGltZSAtIGxhc3RGZXRjaFRpbWVzdGFtcCA+IDQwMDApIHsKICAgIC8vICAgICAgICAgbGFzdEZldGNoVGltZXN0YW1wID0gdGltZTsKICAgIC8vICAgICAgICAgYXdhaXQgYXhpb3MKICAgIC8vICAgICAgICAgICAgIC5nZXQoYCR7dGhpcy5ob3N0fS9jYW1lcmEvZGV0ZWN0L2JveGApCiAgICAvLyAgICAgICAgICAgICAudGhlbigocmVzcCkgPT4gewogICAgLy8gICAgICAgICAgICAgICAgIGlmIChyZXNwLmNvZGUgPT0gMjAwKSB7CiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0aW9ucyA9IHJlc3AuZGF0YTsKICAgIC8vICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdGlvbnMgPSBbXTsKICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiY2Fubm90IGZldGNoIGRldGVjdGlvbnMiKTsKICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICAgICB9KQogICAgLy8gICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAvLyAgICAgICAgICAgICB9KTsKICAgIC8vICAgICAgICAgdGhpcy5wYXJraW5nU3BhY2VTdG9yYWdlLnJlZnJlc2hBdmFpbGFiaWxpdHkodGhpcy5kZXRlY3Rpb25zKTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZldGNoRGV0ZWN0aW9uKTsKICAgIC8vIH0KCiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmV0Y2hEZXRlY3Rpb24pOyAvL+WPlua2iOeUu+W4g+eCueWHu+WPs+mUruaXtuW8ueWHuuWPs+mUruiPnOWNlQoKICAgIHRoaXMuZGV0ZWN0Q2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51IiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9KTsgLy/pvKDmoIfmiqzotbfml7blsJ3or5XliJvlu7rmlrDmo4Dmn6XngrkKCiAgICB0aGlzLmRldGVjdENhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGlmICghX3RoaXMyLmVkaXRhYmxlKSByZXR1cm47CgogICAgICBpZiAoX3RoaXMyLm1vdXNlWCA8IDcyMCAmJiBfdGhpczIubW91c2VZIDwgNDgwKSB7CiAgICAgICAgdmFyIG5ld1BhcmtpbmdTcGFjZSA9IHRydWU7CgogICAgICAgIGlmIChldmVudC5idXR0b24gPT0gMCkgewogICAgICAgICAgLy/lt6bplK7ljZXlh7vml7YKICAgICAgICAgIC8v5aaC5p6c5rKh5pyJ5oKs5YGc5Zyo546w5pyJ5qOA5p+l54K55LiK77yM5YiZ5Yib5bu65LiA5Liq5paw55qE5qOA5p+l54K5CiAgICAgICAgICBfdGhpczIucGFya2luZ1NwYWNlU3RvcmFnZS5mb3JFYWNoKGZ1bmN0aW9uIChwcykgewogICAgICAgICAgICBpZiAocHMuaXNIb3ZlcihfdGhpczIubW91c2VYLCBfdGhpczIubW91c2VZKSkgewogICAgICAgICAgICAgIG5ld1BhcmtpbmdTcGFjZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAobmV3UGFya2luZ1NwYWNlKSB7CiAgICAgICAgICAgIGlmIChfdGhpczIuZWRpdE1vZGUgPT0gImltbWVkaWF0ZSIpIHsKICAgICAgICAgICAgICBfdGhpczIuaW1tZWRpYXRlLklEID0gX3RoaXMyLnBhcmtpbmdTcGFjZVN0b3JhZ2UuY3JlYXRlKF90aGlzMi5tb3VzZVgsIF90aGlzMi5tb3VzZVksIHRydWUpOwoKICAgICAgICAgICAgICBfdGhpczIuJHJlZnNbImltbWVkaWF0ZS1pbnB1dCJdLmZvY3VzKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChfdGhpczIuZWRpdE1vZGUgPT0gImNvbnRpbnVhbHMiKSB7CiAgICAgICAgICAgICAgX3RoaXMyLnBhcmtpbmdTcGFjZVN0b3JhZ2UuY3JlYXRlKF90aGlzMi5tb3VzZVgsIF90aGlzMi5tb3VzZVksIHRydWUsIG51bGwsIF90aGlzMi5jb250aW51YWxzLm5leHQpOwoKICAgICAgICAgICAgICBfdGhpczIuY29udGludWFsc05leHQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuYnV0dG9uID09IDIpIHsKICAgICAgICAgIC8v5Y+z6ZSu5Y2V5Ye75pe2CiAgICAgICAgICAvL+WmguaenOaCrOWBnOWcqOeOsOacieajgOafpeeCueS4iu+8jOWImeWIoOmZpOi/meS4quajgOafpeeCuQogICAgICAgICAgX3RoaXMyLnBhcmtpbmdTcGFjZVN0b3JhZ2UuZm9yRWFjaChmdW5jdGlvbiAocHMpIHsKICAgICAgICAgICAgaWYgKHBzLmlzSG92ZXIoX3RoaXMyLm1vdXNlWCwgX3RoaXMyLm1vdXNlWSkpIHsKICAgICAgICAgICAgICBfdGhpczIucGFya2luZ1NwYWNlU3RvcmFnZS5yZW1vdmUocHMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PSAxKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiKCIuY29uY2F0KF90aGlzMi5tb3VzZVgsICIsICIpLmNvbmNhdChfdGhpczIubW91c2VZLCAiKSIpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOyAvL+m8oOagh+enu+WKqOaXtuWIt+aWsOWCqOWtmOeahOm8oOagh+S9jee9rgoKICAgIHRoaXMuZGV0ZWN0Q2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoIV90aGlzMi5lZGl0YWJsZSkgcmV0dXJuOwoKICAgICAgdmFyIHJlY3QgPSBfdGhpczIuZGV0ZWN0Q2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgdmFyIHNjYWxlID0gNzIwIC8gcmVjdC53aWR0aDsKICAgICAgX3RoaXMyLm1vdXNlWCA9IChldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0KSAqIHNjYWxlOwogICAgICBfdGhpczIubW91c2VZID0gKGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcCkgKiBzY2FsZTsKICAgIH0pOwogICAgdGhpcy5kZXRlY3RDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMyLmVkaXRNb2RlID09ICJpbW1lZGlhdGUiKSB7CiAgICAgICAgX3RoaXMyLmltbWVkaWF0ZS5JRCA9ICIiOwogICAgICAgIF90aGlzMi5pbW1lZGlhdGUubmFtZSA9ICIiOwogICAgICB9CiAgICB9KTsgLy/kuovku7blpITnkIYKCiAgICBQdWJTdWIuc3Vic2NyaWJlKCJyZW5hbWUiLCBmdW5jdGlvbiAobXNnLCBwYXlsb2FkKSB7CiAgICAgIF90aGlzMi5wYXJraW5nU3BhY2VTdG9yYWdlLnJlbmFtZShwYXlsb2FkLmlkLCBwYXlsb2FkLm5hbWUpOwogICAgfSk7CiAgICBQdWJTdWIuc3Vic2NyaWJlKCJoaWdobGlnaHQiLCBmdW5jdGlvbiAobXNnLCBpZCkgewogICAgICBfdGhpczIucGFya2luZ1NwYWNlU3RvcmFnZS5oaWdobGlnaHQoaWQpOwogICAgfSk7CiAgICAvKioKICAgICAqIFByb3ZpZGVzIHJlcXVlc3RBbmltYXRpb25GcmFtZSBpbiBhIGNyb3NzIGJyb3dzZXIgd2F5LgogICAgICogaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy8KICAgICAqLwoKICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkgewogICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7CiAgICAgICAgfTsKICAgICAgfSgpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGVkaXRhYmxlOiBmdW5jdGlvbiBlZGl0YWJsZShuZXdWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCkgUHViU3ViLnB1Ymxpc2goImVkaXQtc3RhcnQiKTtlbHNlIFB1YlN1Yi5wdWJsaXNoKCJlZGl0LWVuZCIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["FaceCheckpointEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,EAAA,IAAA,IAAA,QAAA,MAAA;AACA,OAAA,MAAA,MAAA,WAAA;AACA,OAAA,MAAA,MAAA,iBAAA;AACA,OAAA,IAAA,MAAA,eAAA;;IAEA,Y;AACA,wBAAA,CAAA,EAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA;AAAA;;AACA,SAAA,CAAA,GAAA,CAAA;AACA,SAAA,CAAA,GAAA,CAAA;AACA,SAAA,EAAA,GAAA,EAAA;AACA,SAAA,GAAA,GAAA,GAAA;AACA,SAAA,IAAA,GAAA,IAAA;AACA,SAAA,MAAA,GAAA,CAAA;AACA,SAAA,SAAA,GAAA,IAAA;AACA,SAAA,SAAA,GAAA,KAAA;AACA,SAAA,gBAAA,GAAA,CAAA;AACA;;;;4BAEA,M,EAAA,M,EAAA;AACA;AACA,UACA,IAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,MAAA,IAAA,KAAA,MAAA,IACA,IAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,MAAA,IAAA,KAAA,MAFA,EAGA;AACA,eAAA,KAAA;AACA;;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,IAAA,CACA,CAAA,KAAA,CAAA,GAAA,MAAA,KAAA,KAAA,CAAA,GAAA,MAAA,IACA,CAAA,KAAA,CAAA,GAAA,MAAA,KAAA,KAAA,CAAA,GAAA,MAAA,CAFA,CAAA;;AAIA,UAAA,QAAA,GAAA,KAAA,MAAA,EAAA;AACA,eAAA,KAAA;AACA;;AACA,aAAA,IAAA;AACA;;;wCAEA,U,EAAA;AACA,UAAA,SAAA,GAAA,IAAA;AACA,UAAA,YAAA,GAAA,KAAA;;AAFA,iDAGA,UAHA;AAAA;;AAAA;AAGA,4DAAA;AAAA,cAAA,CAAA;AACA,cAAA,IAAA,GAAA,CAAA,CAAA,CAAA,CAAA;AACA,cAAA,GAAA,GAAA,CAAA,CAAA,CAAA,CAAA;AACA,cAAA,KAAA,GAAA,IAAA,GAAA,CAAA,CAAA,CAAA,CAAA;AACA,cAAA,MAAA,GAAA,GAAA,GAAA,CAAA,CAAA,CAAA,CAAA;;AACA,cAAA,KAAA,CAAA,GAAA,GAAA,IAAA,KAAA,CAAA,GAAA,MAAA,IAAA,KAAA,CAAA,GAAA,IAAA,IAAA,KAAA,CAAA,GAAA,KAAA,EAAA;AACA,YAAA,SAAA,GAAA,KAAA;AACA;AACA;AACA,SAZA,CAaA;;AAbA;AAAA;AAAA;AAAA;AAAA;;AAcA,UAAA,SAAA,EAAA;AACA,aAAA,gBAAA;;AACA,YAAA,KAAA,gBAAA,IAAA,CAAA,EAAA;AACA,eAAA,SAAA,GAAA,IAAA;AACA,eAAA,gBAAA,GAAA,CAAA;AACA,UAAA,YAAA,GAAA,IAAA;AACA;AACA,OAPA,MAOA;AACA,YAAA,KAAA,SAAA,EAAA,YAAA,GAAA,IAAA;AACA,aAAA,SAAA,GAAA,KAAA;AACA,aAAA,gBAAA,GAAA,CAAA;AACA;;AACA,aAAA,YAAA;AACA;;;oCAEA,M,EAAA,M,EAAA;AAAA;;AACA,WAAA,GAAA,CAAA,SAAA;AACA,UAAA,OAAA,GAAA,KAAA,OAAA,CAAA,MAAA,EAAA,MAAA,CAAA;AACA,UAAA,YAAA,GAAA,KAAA,SAAA,IAAA,OAAA,GAAA,GAAA,GAAA,CAAA;AACA,WAAA,GAAA,CAAA,GAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,MAAA,GAAA,YAAA,EAAA,CAAA,EAAA,IAAA,IAAA,CAAA,EAAA,EAAA,KAAA;;AACA,WAAA,GAAA,CAAA,SAAA,GAAA,YAAA;AACA,YAAA,KAAA,CAAA,SAAA,EAAA,OAAA,SAAA;AACA,YAAA,KAAA,CAAA,SAAA,EAAA,OAAA,SAAA;AACA,eAAA,SAAA;AACA,OAJA,EAAA;;AAKA,WAAA,GAAA,CAAA,IAAA;;AACA,UAAA,OAAA,EAAA;AACA,aAAA,GAAA,CAAA,SAAA,GAAA,CAAA;AACA,aAAA,GAAA,CAAA,WAAA,GAAA,KAAA,SAAA,GAAA,SAAA,GAAA,SAAA;AACA,aAAA,GAAA,CAAA,MAAA;AACA;AACA;;;;;;IAGA,mB;AACA,+BAAA,GAAA,EAAA,IAAA,EAAA;AAAA;;AACA,SAAA,GAAA,GAAA,GAAA;AACA,SAAA,IAAA,GAAA,IAAA;AACA,SAAA,OAAA,GAAA,IAAA,GAAA,EAAA;AACA;;;;yBAEA,I,EAAA;AACA,WAAA,IAAA,EAAA,IAAA,IAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,EAAA,CAAA,CAAA,CAAA,EAAA,IAAA,CAAA,EAAA,CAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,IAAA,CAAA,EAAA,CAAA,CAAA,IAAA;AACA;AACA;;;2BAEA,C,EAAA,C,EAAA,Y,EAAA;AAAA,UAAA,EAAA,uEAAA,IAAA;AAAA,UAAA,IAAA,uEAAA,IAAA;AACA,UAAA,KAAA,GAAA,EAAA,IAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA;AACA,UAAA,OAAA,GAAA,IAAA,IAAA,IAAA,GAAA,KAAA,CAAA,SAAA,CAAA,CAAA,EAAA,CAAA,CAAA,GAAA,IAAA;AACA,WAAA,OAAA,CAAA,GAAA,CACA,KADA,EAEA,IAAA,YAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,KAAA,EAAA,OAAA,EAAA,KAAA,GAAA,CAFA;AAIA,MAAA,MAAA,CAAA,OAAA,CAAA,QAAA,EAAA;AACA,QAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CADA;AAEA,QAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAFA;AAGA,QAAA,EAAA,EAAA,KAHA;AAIA,QAAA,IAAA,EAAA;AAJA,OAAA;AAMA,UAAA,YAAA,EAAA,KAAA,MAAA;AACA,aAAA,KAAA;AACA;;;2BAEA,O,EAAA;AACA,WAAA,OAAA,CAAA,MAAA,CAAA,OAAA,CAAA,EAAA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,QAAA,EAAA,OAAA,CAAA,EAAA;AACA,WAAA,MAAA;AACA;;;4BAEA,Q,EAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA,QAAA;AACA;;;oCAEA,M,EAAA,M,EAAA;AACA,WAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,QAAA,EAAA,CAAA,eAAA,CAAA,MAAA,EAAA,MAAA;AACA,OAFA;AAGA;;;wCAEA,U,EAAA;AACA,WAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,YAAA,YAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,UAAA,CAAA;;AACA,YAAA,YAAA,EAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,QAAA,EAAA;AAAA,YAAA,EAAA,EAAA,EAAA,CAAA,EAAA;AAAA,YAAA,SAAA,EAAA,EAAA,CAAA;AAAA,WAAA;AACA;AACA,OALA;AAMA;;;2BAEA,E,EAAA,I,EAAA;AACA,UAAA,OAAA,GAAA,KAAA,OAAA,CAAA,GAAA,CAAA,EAAA,CAAA;AACA,MAAA,OAAA,CAAA,IAAA,GAAA,IAAA;AACA,WAAA,OAAA,CAAA,GAAA,CAAA,EAAA,EAAA,OAAA;AACA,WAAA,MAAA;AACA;;;8BAEA,E,EAAA;AACA,WAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,EAAA;AACA,UAAA,EAAA,CAAA,SAAA,GAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,EAAA,CAAA,SAAA,GAAA,KAAA;AACA;AACA,OANA;AAOA;;;gCAEA,I,EAAA;AACA,UAAA,SAAA,GAAA,KAAA;AACA,WAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,YAAA,EAAA,CAAA,IAAA,IAAA,IAAA,EAAA,SAAA,GAAA,IAAA;AACA,OAFA;AAGA,aAAA,SAAA;AACA;;;8BAEA;AACA,UAAA,WAAA,GAAA,EAAA;AACA,WAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,QAAA,WAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA;AAAA,UAAA,CAAA,EAAA,EAAA,CAAA,CAAA;AAAA,UAAA,CAAA,EAAA,EAAA,CAAA,CAAA;AAAA,UAAA,IAAA,EAAA,EAAA,CAAA;AAAA,SAAA;AACA,OAFA;AAGA,MAAA,KAAA,CACA,IADA,CACA,KAAA,IAAA,GAAA,KAAA,cADA,EACA,WADA,EAEA,IAFA,CAEA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,KAAA,CAAA,wBAAA;AACA;AACA,OANA,EAOA,KAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OATA;AAUA;;;;;;AAGA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,MAAA,EAAA,CAAA,IAAA,CAFA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA;AACA,MAAA,YAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA,IAHA;AAIA;AACA,MAAA,mBAAA,EAAA,IALA;AAMA;AACA,MAAA,UAAA,EAAA,IAPA;AAQA;AACA,MAAA,MAAA,EAAA,CATA;AAUA,MAAA,MAAA,EAAA,CAVA;AAWA;AACA,MAAA,QAAA,EAAA,KAZA;AAaA;AACA,MAAA,QAAA,EAAA,WAdA;AAeA,MAAA,SAAA,EAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAfA;AAoBA,MAAA,UAAA,EAAA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OApBA;AAwBA;AACA,MAAA,SAAA,EAAA,IAzBA;AA0BA,MAAA,IAAA,EAAA,MAAA,CAAA,KAAA,CAAA,OA1BA;AA2BA,MAAA,GAAA,EAAA;AA3BA,KAAA;AA6BA,GAjCA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,EAAA,kBAAA;AACA,UAAA,KAAA,mBAAA,CAAA,WAAA,CAAA,KAAA,SAAA,CAAA,IAAA,CAAA,EAAA;AACA,aAAA,SAAA,CAAA,KAAA,GAAA,KAAA;AACA;AACA;;AACA,WAAA,SAAA,CAAA,KAAA,GAAA,IAAA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,QAAA,EAAA;AACA,QAAA,EAAA,EAAA,KAAA,SAAA,CAAA,EADA;AAEA,QAAA,IAAA,EAAA,KAAA,SAAA,CAAA;AAFA,OAAA;AAIA,KAXA;AAYA,IAAA,cAAA,EAAA,0BAAA;AACA,UAAA,KAAA,GAAA,KAAA,UAAA,CAAA,IAAA,CAAA,MAAA;AACA,UAAA,OAAA,aAAA,MAAA,CAAA,QAAA,CAAA,KAAA,UAAA,CAAA,IAAA,IAAA,CAAA,CAAA;;AACA,aAAA,OAAA,CAAA,MAAA,GAAA,KAAA;AAAA,QAAA,OAAA,cAAA,OAAA,CAAA;AAAA;;AACA,WAAA,UAAA,CAAA,IAAA,GAAA,OAAA;AACA;AAjBA,GAlCA;AAqDA,EAAA,OArDA,qBAqDA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAA,mBAAA,GAAA,IAAA,mBAAA,CACA,KAAA,SADA,EAEA,KAAA,IAFA,CAAA,CAPA,CAWA;;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,KAAA,cAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,GAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,mBAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA;AACA,OAFA,MAEA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA;AACA;AACA,KANA,EAZA,CAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,QAAA,cAAA,GAAA,WAAA,CAAA,YAAA;AACA,UAAA,QAAA,CAAA,cAAA,CAAA,cAAA,EAAA,KAAA,IAAA,CAAA,EAAA;AACA,QAAA,aAAA,CAAA,cAAA,CAAA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,KAAA;AACA;AACA,KALA,EAKA,EALA,CAAA,CAnCA,CA0CA;;AACA,QAAA,oBAAA,GAAA,CAAA;;AACA,QAAA,aAAA,GAAA,SAAA,aAAA,CAAA,IAAA,EAAA;AACA,UAAA,IAAA,GAAA,oBAAA,GAAA,EAAA,EAAA;AACA,QAAA,oBAAA,GAAA,IAAA;AACA,YAAA,MAAA,GAAA,QAAA,CAAA,cAAA,CAAA,cAAA,CAAA;;AACA,YAAA;AACA,UAAA,MAAA,CAAA,SAAA,CAAA,SAAA,CAAA,MAAA,EAAA,CAAA,EAAA,CAAA;AACA,SAFA,CAEA,OAAA,KAAA,EAAA;AACA;AACA;;AACA,QAAA,MAAA,CAAA,mBAAA,CAAA,eAAA,CAAA,MAAA,CAAA,MAAA,EAAA,MAAA,CAAA,MAAA;AACA;;AACA,MAAA,qBAAA,CAAA,aAAA,CAAA;AACA,KAZA;;AAaA,IAAA,qBAAA,CAAA,aAAA,CAAA,CAzDA,CA2DA;;AACA,QAAA,kBAAA,GAAA,CAAA,CA5DA,CA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAA,qBAAA,CAAA,cAAA,CAAA,CAjFA,CAmFA;;AACA,SAAA,YAAA,CAAA,gBAAA,CAAA,aAAA,EAAA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,cAAA;AACA,KAFA,EApFA,CAwFA;;AACA,SAAA,YAAA,CAAA,gBAAA,CAAA,SAAA,EAAA,UAAA,KAAA,EAAA;AACA,UAAA,CAAA,MAAA,CAAA,QAAA,EAAA;;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,GAAA,IAAA,MAAA,CAAA,MAAA,GAAA,GAAA,EAAA;AACA,YAAA,eAAA,GAAA,IAAA;;AACA,YAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA;AACA;AACA,UAAA,MAAA,CAAA,mBAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,gBAAA,EAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,cAAA,eAAA,GAAA,KAAA;AACA;AACA,WAJA;;AAKA,cAAA,eAAA,EAAA;AACA,gBAAA,MAAA,CAAA,QAAA,IAAA,WAAA,EAAA;AACA,cAAA,MAAA,CAAA,SAAA,CAAA,EAAA,GAAA,MAAA,CAAA,mBAAA,CAAA,MAAA,CACA,MAAA,CAAA,MADA,EAEA,MAAA,CAAA,MAFA,EAGA,IAHA,CAAA;;AAKA,cAAA,MAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,KAAA;AACA;;AACA,gBAAA,MAAA,CAAA,QAAA,IAAA,YAAA,EAAA;AACA,cAAA,MAAA,CAAA,mBAAA,CAAA,MAAA,CACA,MAAA,CAAA,MADA,EAEA,MAAA,CAAA,MAFA,EAGA,IAHA,EAIA,IAJA,EAKA,MAAA,CAAA,UAAA,CAAA,IALA;;AAOA,cAAA,MAAA,CAAA,cAAA;AACA;AACA;AACA,SA5BA,MA4BA,IAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA;AACA;AACA,UAAA,MAAA,CAAA,mBAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,gBAAA,EAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,cAAA,MAAA,CAAA,mBAAA,CAAA,MAAA,CAAA,EAAA;AACA;AACA,WAJA;AAKA,SARA,MAQA,IAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,YAAA,MAAA,CAAA,MAAA,eAAA,MAAA,CAAA,MAAA;AACA;AACA;AACA,KA5CA,EAzFA,CAuIA;;AACA,SAAA,YAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,UAAA,KAAA,EAAA;AACA,UAAA,CAAA,MAAA,CAAA,QAAA,EAAA;;AACA,UAAA,IAAA,GAAA,MAAA,CAAA,YAAA,CAAA,qBAAA,EAAA;;AACA,UAAA,KAAA,GAAA,MAAA,IAAA,CAAA,KAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,CAAA,KAAA,CAAA,OAAA,GAAA,IAAA,CAAA,IAAA,IAAA,KAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,CAAA,KAAA,CAAA,OAAA,GAAA,IAAA,CAAA,GAAA,IAAA,KAAA;AACA,KANA;AAQA,SAAA,YAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,IAAA,WAAA,EAAA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,EAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,IAAA,GAAA,EAAA;AACA;AACA,KALA,EAhJA,CAuJA;;AACA,IAAA,MAAA,CAAA,SAAA,CAAA,QAAA,EAAA,UAAA,GAAA,EAAA,OAAA,EAAA;AACA,MAAA,MAAA,CAAA,mBAAA,CAAA,MAAA,CAAA,OAAA,CAAA,EAAA,EAAA,OAAA,CAAA,IAAA;AACA,KAFA;AAGA,IAAA,MAAA,CAAA,SAAA,CAAA,WAAA,EAAA,UAAA,GAAA,EAAA,EAAA,EAAA;AACA,MAAA,MAAA,CAAA,mBAAA,CAAA,SAAA,CAAA,EAAA;AACA,KAFA;AAIA;;;;;AAIA,QAAA,CAAA,MAAA,CAAA,qBAAA,EAAA;AACA,MAAA,MAAA,CAAA,qBAAA,GAAA,YAAA;AACA,eACA,MAAA,CAAA,2BAAA,IACA,MAAA,CAAA,wBADA,IAEA,MAAA,CAAA,sBAFA,IAGA,MAAA,CAAA,uBAHA,IAIA,UAAA,QAAA,EAAA;AACA,UAAA,MAAA,CAAA,UAAA,CAAA,QAAA,EAAA,OAAA,EAAA;AACA,SAPA;AASA,OAVA,EAAA;AAWA;AACA,GArOA;AAsOA,EAAA,KAAA,EAAA;AACA,IAAA,QADA,oBACA,MADA,EACA;AACA,UAAA,MAAA,EAAA,MAAA,CAAA,OAAA,CAAA,YAAA,EAAA,KACA,MAAA,CAAA,OAAA,CAAA,UAAA;AACA;AAJA;AAtOA,CAAA","sourcesContent":["<template>\r\n    <b-card fluid>\r\n        <template v-slot:header>\r\n            识别结果\r\n            <!--            <b-button class=\"float-right\" size=\"sm\" variant=\"outline-secondary\" v-b-modal.live>实时画面</b-button>-->\r\n            <b-modal id=\"live\" title=\"实时画面\" size=\"lg\" ok-only ok-title=\"返回\">\r\n                <b-img :src=\"host+'/camera/live'\" fluid-grow/>\r\n            </b-modal>\r\n        </template>\r\n        <!-- 基于mjpeg流的识别结果图像 -->\r\n        <img\r\n                :src=\"host+getFaceBoxLiveUrl+'?url='+url\"\r\n                id=\"detectSource\"\r\n                crossorigin=\"Anonymous\"\r\n                width=\"584px\"\r\n                height=\"414px\"\r\n        />\r\n        <!-- UI设计时占位用的猫猫图 -->\r\n        <!--         <img src=\"../../assets/720x480.png\" id=\"detectSource\" style=\"display: none;\" />-->\r\n        <!-- 主画布 -->\r\n<!--                <b-overlay :show=\"preparing\">-->\r\n<!--                    <canvas id=\"detectCanvas\"></canvas>-->\r\n<!--                </b-overlay>-->\r\n        <!-- 编辑模式的控制表单 -->\r\n        <div v-if=\"editable\">\r\n            <!-- 编辑模式选择器 -->\r\n            <b-form-radio-group id=\"editModeSelector\" v-model=\"editMode\" class=\"mb-3\">\r\n                <b-form-radio value=\"immediate\">即时编号模式</b-form-radio>\r\n                <b-form-radio value=\"continuals\">连续编号模式</b-form-radio>\r\n            </b-form-radio-group>\r\n            <!-- 即时编号模式：每创建一个点，输入框就获得焦点 -->\r\n            <b-form inline v-if=\"editMode == 'immediate'\" class=\"mb-3\">\r\n                <label for=\"immediate-input\">输入编号</label>\r\n                <b-form-input\r\n                        id=\"immediate-input\"\r\n                        ref=\"immediate-input\"\r\n                        v-model=\"immediate.name\"\r\n                        :state=\"immediate.state\"\r\n                        @keyup=\"rename\"\r\n                />\r\n            </b-form>\r\n            <!-- 连续编号模式：输入初始值，按顺序递增 -->\r\n            <b-form inline v-if=\"editMode == 'continuals'\" class=\"mb-3\">\r\n                <label for=\"continuals-input\">下一个编号</label>\r\n                <b-form-input\r\n                        id=\"continuals-input\"\r\n                        v-model=\"continuals.next\"\r\n                        :state=\"continuals.state\"\r\n                />\r\n            </b-form>\r\n        </div>\r\n        <!-- 切换编辑模式的按钮 -->\r\n        <b-button\r\n                block\r\n                class=\"mt-3\"\r\n                variant=\"outline-secondary\"\r\n                @click=\"editable = !editable\"\r\n        >\r\n            {{ editable ? \"完成\" : \"编辑\" }}\r\n        </b-button>\r\n    </b-card>\r\n</template>\r\n\r\n<script>\r\n    import axios from \"axios\";\r\n    import {v4 as uuid} from \"uuid\";\r\n    import PubSub from \"pubsub-js\";\r\n    import config from \"@/config/config\";\r\n    import http from \"@/config/http\"\r\n\r\n    class ParkingSpace {\r\n        constructor(x, y, id, name, ctx) {\r\n            this.x = x;\r\n            this.y = y;\r\n            this.id = id;\r\n            this.ctx = ctx;\r\n            this.name = name;\r\n            this.radius = 5;\r\n            this.available = true;\r\n            this.highlight = false;\r\n            this.availableCounter = 0;\r\n        }\r\n\r\n        isHover(mouseX, mouseY) {\r\n            // 水平距离或垂直距离大于半径，则一定不可能悬停\r\n            if (\r\n                Math.abs(this.x - mouseX) > this.radius ||\r\n                Math.abs(this.y - mouseY) > this.radius\r\n            ) {\r\n                return false;\r\n            }\r\n            let distance = Math.sqrt(\r\n                (this.x - mouseX) * (this.x - mouseX) +\r\n                (this.y - mouseY) * (this.y - mouseY)\r\n            );\r\n            if (distance > this.radius) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n\r\n        refreshAvailability(detections) {\r\n            let available = true;\r\n            let stateChanged = false;\r\n            for (let e of detections) {\r\n                let left = e[0];\r\n                let top = e[1];\r\n                let right = left + e[2];\r\n                let bottom = top + e[3];\r\n                if (this.y > top && this.y < bottom && this.x > left && this.x < right) {\r\n                    available = false;\r\n                    break;\r\n                }\r\n            }\r\n            //模型容易把有车识别成没车，但不容易把没车识别成有车，所以连续识别三次没车才改变状态\r\n            if (available) {\r\n                this.availableCounter++;\r\n                if (this.availableCounter == 3) {\r\n                    this.available = true;\r\n                    this.availableCounter = 0;\r\n                    stateChanged = true;\r\n                }\r\n            } else {\r\n                if (this.available) stateChanged = true;\r\n                this.available = false;\r\n                this.availableCounter = 0;\r\n            }\r\n            return stateChanged;\r\n        }\r\n\r\n        refreshExterior(mouseX, mouseY) {\r\n            this.ctx.beginPath();\r\n            let isHover = this.isHover(mouseX, mouseY)\r\n            let resizeFactor = (this.highlight || isHover) ? 1.5 : 1\r\n            this.ctx.arc(this.x, this.y, this.radius * resizeFactor, 0, 2 * Math.PI, false);\r\n            this.ctx.fillStyle = (() => {\r\n                if (this.highlight) return \"#ffa500\";\r\n                if (this.available) return \"#00ff00\";\r\n                return \"#ff0000\";\r\n            })();\r\n            this.ctx.fill();\r\n            if (isHover) {\r\n                this.ctx.lineWidth = 2;\r\n                this.ctx.strokeStyle = this.available ? \"#003300\" : \"#330000\";\r\n                this.ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n\r\n    class ParkingSpaceStorage {\r\n        constructor(ctx, host) {\r\n            this.ctx = ctx;\r\n            this.host = host;\r\n            this.storage = new Map();\r\n        }\r\n\r\n        load(data) {\r\n            for (let id in data) {\r\n                this.create(data[id].x, data[id].y, false, id, data[id].name);\r\n            }\r\n        }\r\n\r\n        create(x, y, exportNeeded, id = null, name = null) {\r\n            let newID = id == null ? uuid() : id;\r\n            let newName = name == null ? newID.substring(0, 5) : name;\r\n            this.storage.set(\r\n                newID,\r\n                new ParkingSpace(Math.round(x), Math.round(y), newID, newName, this.ctx)\r\n            );\r\n            PubSub.publish(\"create\", {\r\n                x: Math.round(x),\r\n                y: Math.round(y),\r\n                id: newID,\r\n                name: newName,\r\n            });\r\n            if (exportNeeded) this.export();\r\n            return newID;\r\n        }\r\n\r\n        remove(element) {\r\n            this.storage.delete(element.id)\r\n            PubSub.publish(\"remove\", element.id);\r\n            this.export();\r\n        }\r\n\r\n        forEach(callback) {\r\n            this.storage.forEach(callback);\r\n        }\r\n\r\n        refreshExterior(mouseX, mouseY) {\r\n            this.forEach((ps) => {\r\n                ps.refreshExterior(mouseX, mouseY);\r\n            });\r\n        }\r\n\r\n        refreshAvailability(detections) {\r\n            this.forEach((ps) => {\r\n                let stateChanged = ps.refreshAvailability(detections);\r\n                if (stateChanged) {\r\n                    PubSub.publish(\"change\", {id: ps.id, available: ps.available});\r\n                }\r\n            });\r\n        }\r\n\r\n        rename(id, name) {\r\n            let element = this.storage.get(id)\r\n            element.name = name;\r\n            this.storage.set(id, element)\r\n            this.export();\r\n        }\r\n\r\n        highlight(id) {\r\n            this.forEach((ps) => {\r\n                if (ps.id == id) {\r\n                    ps.highlight = true;\r\n                } else {\r\n                    ps.highlight = false;\r\n                }\r\n            });\r\n        }\r\n\r\n        isDuplicate(name) {\r\n            let duplicate = false;\r\n            this.forEach((ps) => {\r\n                if (ps.name == name) duplicate = true;\r\n            });\r\n            return duplicate;\r\n        }\r\n\r\n        export() {\r\n            let tempStorage = {};\r\n            this.forEach((ps) => {\r\n                tempStorage[ps.id] = {x: ps.x, y: ps.y, name: ps.name};\r\n            });\r\n            axios\r\n                .post(this.host + this.checkpointsUrl, tempStorage)\r\n                .then((resp) => {\r\n                    if (resp.code !== 200) {\r\n                        console.error(\"cannot post point data\");\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        }\r\n    }\r\n\r\n    export default {\r\n        name: \"ckeckpoint-editor\",\r\n        mixins: [http],\r\n        data: function () {\r\n            return {\r\n                //识别结果画布及其上下文\r\n                detectCanvas: null,\r\n                detectCtx: null,\r\n                //车位（检查点）列表\r\n                parkingSpaceStorage: null,\r\n                //detection = [[x, y, w, h], [x, y, w, h], ...]\r\n                detections: null,\r\n                //鼠标位置\r\n                mouseX: 0,\r\n                mouseY: 0,\r\n                //是否在编辑状态\r\n                editable: false,\r\n                //编辑状态相关\r\n                editMode: \"immediate\",\r\n                immediate: {\r\n                    ID: \"\",\r\n                    name: \"\",\r\n                    state: null,\r\n                },\r\n                continuals: {\r\n                    next: \"001\",\r\n                    state: null,\r\n                },\r\n                //是否还在初始化\r\n                preparing: true,\r\n                host: config.axios.baseURL,\r\n                url: 'rtsp://192.168.137.102:8557'\r\n            };\r\n        },\r\n        methods: {\r\n            rename: function () {\r\n                if (this.parkingSpaceStorage.isDuplicate(this.immediate.name)) {\r\n                    this.immediate.state = false;\r\n                    return;\r\n                }\r\n                this.immediate.state = null;\r\n                PubSub.publish(\"rename\", {\r\n                    id: this.immediate.ID,\r\n                    name: this.immediate.name,\r\n                });\r\n            },\r\n            continualsNext: function () {\r\n                let digit = this.continuals.next.length;\r\n                let newNext = `${Number.parseInt(this.continuals.next) + 1}`;\r\n                while (newNext.length < digit) newNext = `0${newNext}`;\r\n                this.continuals.next = newNext;\r\n            },\r\n        },\r\n        created() {\r\n            //创建对识别结果画布及其上下文的引用\r\n            // this.detectCanvas = document.getElementById(\"detectCanvas\");\r\n            // this.detectCanvas.width = 720;\r\n            // this.detectCanvas.height = 480;\r\n            // this.detectCtx = document.getElementById(\"detectCanvas\").getContext(\"2d\");\r\n            //初始化检查点储存\r\n            this.parkingSpaceStorage = new ParkingSpaceStorage(\r\n                this.detectCtx,\r\n                this.host\r\n            );\r\n            //获取服务器端缓存的检查点信息\r\n            this.$curl.get(this.checkpointsUrl).then(res => {\r\n                    if (res.code === 200) {\r\n                        this.parkingSpaceStorage.load(res.data);\r\n                    } else{\r\n                        this.$Message.warning(JSON.stringify(res));\r\n                    }\r\n                });\r\n            // //获取识别框\r\n            //  axios\r\n            //     .get(`${this.host}/camera/detect/box`)\r\n            //     .then((resp) => {\r\n            //         if (resp.code == 200) {\r\n            //             this.detections = resp.data;\r\n            //         } else {\r\n            //             this.detections = [];\r\n            //             console.error(\"cannot fetch detections\");\r\n            //         }\r\n            //     })\r\n            //     .catch((err) => {\r\n            //         console.error(`${err}`);\r\n            //     });\r\n\r\n            //当图像源宽度不是0（即已加载好）时取消\"准备中\"遮罩\r\n            let prepareChecker = setInterval(() => {\r\n                if (document.getElementById(\"detectSource\").width != 0) {\r\n                    clearInterval(prepareChecker);\r\n                    this.preparing = false;\r\n                }\r\n            }, 50);\r\n\r\n            //每50毫秒刷新一次画布\r\n            let lastRefreshTimestamp = 0;\r\n            let refreshCanvas = (time) => {\r\n                if (time - lastRefreshTimestamp > 50) {\r\n                    lastRefreshTimestamp = time;\r\n                    let source = document.getElementById(\"detectSource\");\r\n                    try {\r\n                        this.detectCtx.drawImage(source, 0, 0);\r\n                    } catch (error) {\r\n                        /*ignore warning*/\r\n                    }\r\n                    this.parkingSpaceStorage.refreshExterior(this.mouseX, this.mouseY);\r\n                }\r\n                requestAnimationFrame(refreshCanvas);\r\n            };\r\n            requestAnimationFrame(refreshCanvas);\r\n\r\n            //每4秒获取一次识别框并刷新占用情况\r\n            let lastFetchTimestamp = 0;\r\n            // let fetchDetection = async (time) => {\r\n            //     if (time - lastFetchTimestamp > 4000) {\r\n            //         lastFetchTimestamp = time;\r\n            //         await axios\r\n            //             .get(`${this.host}/camera/detect/box`)\r\n            //             .then((resp) => {\r\n            //                 if (resp.code == 200) {\r\n            //                     this.detections = resp.data;\r\n            //                 } else {\r\n            //                     this.detections = [];\r\n            //                     console.error(\"cannot fetch detections\");\r\n            //                 }\r\n            //             })\r\n            //             .catch((err) => {\r\n            //                 console.error(err);\r\n            //             });\r\n            //         this.parkingSpaceStorage.refreshAvailability(this.detections);\r\n            //     }\r\n            //     requestAnimationFrame(fetchDetection);\r\n            // }\r\n            requestAnimationFrame(fetchDetection);\r\n\r\n            //取消画布点击右键时弹出右键菜单\r\n            this.detectCanvas.addEventListener(\"contextmenu\", (event) => {\r\n                event.preventDefault();\r\n            });\r\n\r\n            //鼠标抬起时尝试创建新检查点\r\n            this.detectCanvas.addEventListener(\"mouseup\", (event) => {\r\n                if (!this.editable) return;\r\n                if (this.mouseX < 720 && this.mouseY < 480) {\r\n                    let newParkingSpace = true;\r\n                    if (event.button == 0) {\r\n                        //左键单击时\r\n                        //如果没有悬停在现有检查点上，则创建一个新的检查点\r\n                        this.parkingSpaceStorage.forEach((ps) => {\r\n                            if (ps.isHover(this.mouseX, this.mouseY)) {\r\n                                newParkingSpace = false;\r\n                            }\r\n                        });\r\n                        if (newParkingSpace) {\r\n                            if (this.editMode == \"immediate\") {\r\n                                this.immediate.ID = this.parkingSpaceStorage.create(\r\n                                    this.mouseX,\r\n                                    this.mouseY,\r\n                                    true\r\n                                );\r\n                                this.$refs[\"immediate-input\"].focus();\r\n                            }\r\n                            if (this.editMode == \"continuals\") {\r\n                                this.parkingSpaceStorage.create(\r\n                                    this.mouseX,\r\n                                    this.mouseY,\r\n                                    true,\r\n                                    null,\r\n                                    this.continuals.next\r\n                                );\r\n                                this.continualsNext();\r\n                            }\r\n                        }\r\n                    } else if (event.button == 2) {\r\n                        //右键单击时\r\n                        //如果悬停在现有检查点上，则删除这个检查点\r\n                        this.parkingSpaceStorage.forEach((ps) => {\r\n                            if (ps.isHover(this.mouseX, this.mouseY)) {\r\n                                this.parkingSpaceStorage.remove(ps);\r\n                            }\r\n                        });\r\n                    } else if (event.button == 1) {\r\n                        console.log(`(${this.mouseX}, ${this.mouseY})`);\r\n                    }\r\n                }\r\n            });\r\n\r\n            //鼠标移动时刷新储存的鼠标位置\r\n            this.detectCanvas.addEventListener(\"mousemove\", (event) => {\r\n                if (!this.editable) return;\r\n                let rect = this.detectCanvas.getBoundingClientRect();\r\n                let scale = 720 / rect.width;\r\n                this.mouseX = (event.clientX - rect.left) * scale;\r\n                this.mouseY = (event.clientY - rect.top) * scale;\r\n            });\r\n\r\n            this.detectCanvas.addEventListener(\"mousedown\", () => {\r\n                if (this.editMode == \"immediate\") {\r\n                    this.immediate.ID = \"\";\r\n                    this.immediate.name = \"\";\r\n                }\r\n            });\r\n\r\n            //事件处理\r\n            PubSub.subscribe(\"rename\", (msg, payload) => {\r\n                this.parkingSpaceStorage.rename(payload.id, payload.name);\r\n            });\r\n            PubSub.subscribe(\"highlight\", (msg, id) => {\r\n                this.parkingSpaceStorage.highlight(id);\r\n            });\r\n\r\n            /**\r\n             * Provides requestAnimationFrame in a cross browser way.\r\n             * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n             */\r\n            if (!window.requestAnimationFrame) {\r\n                window.requestAnimationFrame = (function () {\r\n                    return (\r\n                        window.webkitRequestAnimationFrame ||\r\n                        window.mozRequestAnimationFrame ||\r\n                        window.oRequestAnimationFrame ||\r\n                        window.msRequestAnimationFrame ||\r\n                        function (callback) {\r\n                            window.setTimeout(callback, 1000 / 60);\r\n                        }\r\n                    );\r\n                })();\r\n            }\r\n        },\r\n        watch: {\r\n            editable(newVal) {\r\n                if (newVal) PubSub.publish(\"edit-start\");\r\n                else PubSub.publish(\"edit-end\");\r\n            },\r\n        },\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n    #detectCanvas {\r\n        width: 100%;\r\n    }\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/Configuration"}]}