{"remainingRequest":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!/Volumes/JAKY/温博老师给的任务/智能盒子(1)/src/components/BatteryCarDetector/Status.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/src/components/BatteryCarDetector/Status.vue","mtime":1606375508000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/智能盒子(1)/node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUHViU3ViIGZyb20gInB1YnN1Yi1qcyI7DQppbXBvcnQgYmF0dGVyeUNhckltZzEgZnJvbSAiLi4vLi4vYXNzZXRzL2ltZy8xLmpwZWciOw0KaW1wb3J0IGJhdHRlcnlDYXJJbWcyIGZyb20gIi4uLy4uL2Fzc2V0cy9pbWcvMi5qcGVnIjsNCmltcG9ydCBiYXR0ZXJ5Q2FySW1nMyBmcm9tICIuLi8uLi9hc3NldHMvaW1nLzMuanBlZyI7DQoNCmNsYXNzIFBhcmtpbmdTcGFjZVN0b3JhZ2Ugew0KICAvL+S4jmRhcmtuZXQudnVl6YeM6Z2i55qE5ZCM5ZCN57G75Yy65Yir77ya6L+Z5Liq57G75Li76KaB5YKo5a2Y5L2N572u5L+h5oGv5ZKMSUTkv6Hmga/vvIxkYXJrbmV0LnZ1ZemHjOeahOS4u+imgeaOp+WItuaYvuekug0KICBjb25zdHJ1Y3RvcigpIHsNCiAgICB0aGlzLnN0b3JhZ2UgPSBbXTsNCiAgICB0aGlzLmF2YWlsYWJsZSA9IDA7DQogIH0NCg0KICBhZGQoeCwgeSwgaWQsIG5hbWUpIHsNCiAgICB0aGlzLnN0b3JhZ2UucHVzaCh7IHgsIHksIGlkLCBuYW1lLCBhdmFpbGFibGU6IHRydWUgfSk7DQogICAgdGhpcy5zdG9yYWdlLnNvcnQoKGEsIGIpID0+IHsNCiAgICAgIHJldHVybiBhLm5hbWUgPiBiLm5hbWUgPyAxIDogLTE7DQogICAgfSk7DQogICAgdGhpcy5yZWZyZXNoQXZhaWxhYmlsaXR5KCk7DQogIH0NCg0KICByZW1vdmUoaWQpIHsNCiAgICBmb3IgKGxldCBpIGluIHRoaXMuc3RvcmFnZSkgew0KICAgICAgaWYgKHRoaXMuc3RvcmFnZVtpXS5pZCA9PSBpZCkgew0KICAgICAgICB0aGlzLnN0b3JhZ2Uuc3BsaWNlKGksIDEpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIHRoaXMucmVmcmVzaEF2YWlsYWJpbGl0eSgpOw0KICB9DQoNCiAgcmVuYW1lKGlkLCBuYW1lKSB7DQogICAgZm9yIChsZXQgaSBpbiB0aGlzLnN0b3JhZ2UpIHsNCiAgICAgIGlmICh0aGlzLnN0b3JhZ2VbaV0uaWQgPT0gaWQpIHsNCiAgICAgICAgdGhpcy5zdG9yYWdlW2ldLm5hbWUgPSBuYW1lOw0KICAgICAgfQ0KICAgIH0NCiAgICB0aGlzLnN0b3JhZ2Uuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuIGEubmFtZSA+IGIubmFtZSA/IDEgOiAtMTsNCiAgICB9KTsNCiAgfQ0KDQogIGNoYW5nZShpZCwgYXZhaWxhYmxlKSB7DQogICAgZm9yIChsZXQgaSBpbiB0aGlzLnN0b3JhZ2UpIHsNCiAgICAgIGlmICh0aGlzLnN0b3JhZ2VbaV0uaWQgPT0gaWQpIHsNCiAgICAgICAgdGhpcy5zdG9yYWdlW2ldLmF2YWlsYWJsZSA9IGF2YWlsYWJsZTsNCiAgICAgIH0NCiAgICB9DQogICAgdGhpcy5yZWZyZXNoQXZhaWxhYmlsaXR5KCk7DQogIH0NCg0KICByZWZyZXNoQXZhaWxhYmlsaXR5KCkgew0KICAgIGxldCBjb3VudGVyID0gMDsNCiAgICB0aGlzLnN0b3JhZ2UuZm9yRWFjaCgoZSkgPT4gew0KICAgICAgaWYgKGUuYXZhaWxhYmxlKSBjb3VudGVyKys7DQogICAgfSk7DQogICAgdGhpcy5hdmFpbGFibGUgPSBjb3VudGVyOw0KICB9DQp9DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInN0YXR1cyIsDQogIGRhdGE6IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcGFya2luZ1NwYWNlU3RvcmFnZTogbnVsbCwNCiAgICAgIGhlaWdodDogMCwNCiAgICAgIGVkaXRpbmc6IHsNCiAgICAgICAgaWQ6ICIiLA0KICAgICAgICBuYW1lOiAiIiwNCiAgICAgIH0sDQogICAgICBzaG93SW1nOiBiYXR0ZXJ5Q2FySW1nMSwNCiAgICAgIGJhdHRlcnlDYXJSZXN1bHQ6IFsNCiAgICAgICAgew0KICAgICAgICAgIGltZzogYmF0dGVyeUNhckltZzEsDQogICAgICAgICAgZGF0ZTogIjIwMjAtMTEtMDkgMTU6MTM6MTIiLA0KICAgICAgICAgIGluZm86ICLnlLXnk7bovabpl6/lhaUiDQogICAgICAgIH0sew0KICAgICAgICAgIGltZzogYmF0dGVyeUNhckltZzIsDQogICAgICAgICAgZGF0ZTogIjIwMjAtMTEtMDkgMTU6MTM6MTIiLA0KICAgICAgICAgIGluZm86ICLnlLXnk7bovabpl6/lhaUiDQogICAgICAgIH0sew0KICAgICAgICAgIGltZzogYmF0dGVyeUNhckltZzMsDQogICAgICAgICAgZGF0ZTogIjIwMjAtMTEtMDkgMTU6MTM6MTIiLA0KICAgICAgICAgIGluZm86ICLnlLXnk7bovabpl6/lhaUiDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNoYW5nZVNob3dJbWc6IGZ1bmN0aW9uKHNyYykgew0KICAgICAgdGhpcy5zaG93SW1nID0gc3JjDQogICAgfSwNCiAgICBzaG93UmVuYW1lQm94OiBmdW5jdGlvbiAoaWQsIG5hbWUpIHsNCiAgICAgIHRoaXMuZWRpdGluZy5pZCA9IGlkOw0KICAgICAgdGhpcy5lZGl0aW5nLm5hbWUgPSBuYW1lOw0KICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCJwYXJraW5nLXJlbmFtZSIpOw0KICAgIH0sDQogICAgcmVuYW1lQ29tcGxldGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIFB1YlN1Yi5wdWJsaXNoKCJyZW5hbWUiLCB7DQogICAgICAgIGlkOiB0aGlzLmVkaXRpbmcuaWQsDQogICAgICAgIG5hbWU6IHRoaXMuZWRpdGluZy5uYW1lLA0KICAgICAgfSk7DQogICAgICB0aGlzLnJlc2V0Rm9ybSgpOw0KICAgIH0sDQogICAgcmVzZXRGb3JtOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLmVkaXRpbmcuaWQgPSAiIjsNCiAgICAgIHRoaXMuZWRpdGluZy5uYW1lID0gIiI7DQogICAgfSwNCiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uIChpZCkgew0KICAgICAgUHViU3ViLnB1Ymxpc2goImhpZ2hsaWdodCIsIGlkKTsNCiAgICB9LA0KICB9LA0KICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7DQogICAgdGhpcy5wYXJraW5nU3BhY2VTdG9yYWdlID0gbmV3IFBhcmtpbmdTcGFjZVN0b3JhZ2UoKTsNCiAgICBQdWJTdWIuc3Vic2NyaWJlKCJjcmVhdGUiLCAobXNnLCBwb2ludCkgPT4gew0KICAgICAgdGhpcy5wYXJraW5nU3BhY2VTdG9yYWdlLmFkZChwb2ludC54LCBwb2ludC55LCBwb2ludC5pZCwgcG9pbnQubmFtZSk7DQogICAgfSk7DQogICAgUHViU3ViLnN1YnNjcmliZSgicmVtb3ZlIiwgKG1zZywgaWQpID0+IHsNCiAgICAgIHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZS5yZW1vdmUoaWQpOw0KICAgIH0pOw0KICAgIFB1YlN1Yi5zdWJzY3JpYmUoImNoYW5nZSIsIChtc2csIHBheWxvYWQpID0+IHsNCiAgICAgIHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZS5jaGFuZ2UocGF5bG9hZC5pZCwgcGF5bG9hZC5hdmFpbGFibGUpOw0KICAgIH0pOw0KICAgIFB1YlN1Yi5zdWJzY3JpYmUoInJlbmFtZSIsIChtc2csIHBheWxvYWQpID0+IHsNCiAgICAgIHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZS5yZW5hbWUocGF5bG9hZC5pZCwgcGF5bG9hZC5uYW1lKTsNCiAgICB9KTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBhdmFpbGFibGVPbmx5OiBmdW5jdGlvbiAoKSB7DQogICAgICBsZXQgZGF0YSA9IFtdOw0KICAgICAgdGhpcy5wYXJraW5nU3BhY2VTdG9yYWdlLnN0b3JhZ2UuZm9yRWFjaCgoZSkgPT4gew0KICAgICAgICBpZiAoZS5hdmFpbGFibGUpIGRhdGEucHVzaChlKTsNCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIGRhdGE7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["Status.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Status.vue","sourceRoot":"src/components/BatteryCarDetector","sourcesContent":["<template>\r\n  <b-card id=\"parkingListContainer\" body-class=\"overflow-auto maxh\">\r\n    <template v-slot:header>\r\n      电瓶车识别结果\r\n      <b-progress :max=\"batteryCarResult.length\" show-value class=\"mt-3\">\r\n                <b-progress-bar :value=\"batteryCarResult.length\" variant=\"success\"/>\r\n                <!-- <b-progress-bar :value=\"batteryCarResult.storage.length - batteryCarResult.available\"\r\n                                variant=\"danger\"/> -->\r\n            </b-progress>\r\n    </template>\r\n    <b-modal id=\"live\" title=\"实时画面\" size=\"lg\" ok-only ok-title=\"返回\">\r\n        <b-img\r\n          :src=\"showImg\"\r\n          fluid-grow\r\n        />\r\n      </b-modal>\r\n    <b-table-simple small hover class=\"resultTable\">\r\n      <b-tbody class=\"batteryCarAlert\">\r\n        <b-tr\r\n          class=\"batteryCarImg\"\r\n          v-for=\"(goal, i) in batteryCarResult\"\r\n          v-bind:key=\"i\"\r\n          variant=\"danger\"\r\n          @click=\"changeShowImg(goal.img)\"\r\n          v-b-modal.live\r\n        >\r\n          <b-td >{{goal.date}}</b-td>\r\n          <b-td >{{goal.info}}</b-td>\r\n\r\n        </b-tr>\r\n        <!-- <b-tr\r\n                        v-for=\"space in parkingSpaceStorage.storage\"\r\n                        :key=\"space.id\"\r\n                        :variant=\"space.available ? 'success' : 'danger'\"\r\n                        @click=\"showRenameBox(space.id, space.name)\"\r\n                        @mouseenter=\"highlight(space.id)\"\r\n                        @mouseleave=\"highlight('')\"\r\n                >\r\n                    <b-td>{{ space.name }}</b-td>\r\n                    <b-td>{{ space.available ? \"空闲\" : \"占用\" }}</b-td>\r\n                </b-tr> -->\r\n      </b-tbody>\r\n    </b-table-simple>\r\n    <b-modal\r\n      id=\"parking-rename\"\r\n      title=\"车位重命名\"\r\n      size=\"lg\"\r\n      cancel-title=\"取消\"\r\n      ok-title=\"确定\"\r\n      @ok=\"renameComplete\"\r\n      @cancel=\"resetForm\"\r\n      @close=\"resetForm\"\r\n      body-class=\"justify-content-center\"\r\n    >\r\n      <label for=\"editID\">车位号</label>\r\n      <b-form-input id=\"editID\" v-model=\"editing.name\" type=\"text\" />\r\n    </b-modal>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nimport PubSub from \"pubsub-js\";\r\nimport batteryCarImg1 from \"../../assets/img/1.jpeg\";\r\nimport batteryCarImg2 from \"../../assets/img/2.jpeg\";\r\nimport batteryCarImg3 from \"../../assets/img/3.jpeg\";\r\n\r\nclass ParkingSpaceStorage {\r\n  //与darknet.vue里面的同名类区别：这个类主要储存位置信息和ID信息，darknet.vue里的主要控制显示\r\n  constructor() {\r\n    this.storage = [];\r\n    this.available = 0;\r\n  }\r\n\r\n  add(x, y, id, name) {\r\n    this.storage.push({ x, y, id, name, available: true });\r\n    this.storage.sort((a, b) => {\r\n      return a.name > b.name ? 1 : -1;\r\n    });\r\n    this.refreshAvailability();\r\n  }\r\n\r\n  remove(id) {\r\n    for (let i in this.storage) {\r\n      if (this.storage[i].id == id) {\r\n        this.storage.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n    this.refreshAvailability();\r\n  }\r\n\r\n  rename(id, name) {\r\n    for (let i in this.storage) {\r\n      if (this.storage[i].id == id) {\r\n        this.storage[i].name = name;\r\n      }\r\n    }\r\n    this.storage.sort((a, b) => {\r\n      return a.name > b.name ? 1 : -1;\r\n    });\r\n  }\r\n\r\n  change(id, available) {\r\n    for (let i in this.storage) {\r\n      if (this.storage[i].id == id) {\r\n        this.storage[i].available = available;\r\n      }\r\n    }\r\n    this.refreshAvailability();\r\n  }\r\n\r\n  refreshAvailability() {\r\n    let counter = 0;\r\n    this.storage.forEach((e) => {\r\n      if (e.available) counter++;\r\n    });\r\n    this.available = counter;\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: \"status\",\r\n  data: function () {\r\n    return {\r\n      parkingSpaceStorage: null,\r\n      height: 0,\r\n      editing: {\r\n        id: \"\",\r\n        name: \"\",\r\n      },\r\n      showImg: batteryCarImg1,\r\n      batteryCarResult: [\r\n        {\r\n          img: batteryCarImg1,\r\n          date: \"2020-11-09 15:13:12\",\r\n          info: \"电瓶车闯入\"\r\n        },{\r\n          img: batteryCarImg2,\r\n          date: \"2020-11-09 15:13:12\",\r\n          info: \"电瓶车闯入\"\r\n        },{\r\n          img: batteryCarImg3,\r\n          date: \"2020-11-09 15:13:12\",\r\n          info: \"电瓶车闯入\"\r\n        }\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    changeShowImg: function(src) {\r\n      this.showImg = src\r\n    },\r\n    showRenameBox: function (id, name) {\r\n      this.editing.id = id;\r\n      this.editing.name = name;\r\n      this.$bvModal.show(\"parking-rename\");\r\n    },\r\n    renameComplete: function () {\r\n      PubSub.publish(\"rename\", {\r\n        id: this.editing.id,\r\n        name: this.editing.name,\r\n      });\r\n      this.resetForm();\r\n    },\r\n    resetForm: function () {\r\n      this.editing.id = \"\";\r\n      this.editing.name = \"\";\r\n    },\r\n    highlight: function (id) {\r\n      PubSub.publish(\"highlight\", id);\r\n    },\r\n  },\r\n  created: function () {\r\n    this.parkingSpaceStorage = new ParkingSpaceStorage();\r\n    PubSub.subscribe(\"create\", (msg, point) => {\r\n      this.parkingSpaceStorage.add(point.x, point.y, point.id, point.name);\r\n    });\r\n    PubSub.subscribe(\"remove\", (msg, id) => {\r\n      this.parkingSpaceStorage.remove(id);\r\n    });\r\n    PubSub.subscribe(\"change\", (msg, payload) => {\r\n      this.parkingSpaceStorage.change(payload.id, payload.available);\r\n    });\r\n    PubSub.subscribe(\"rename\", (msg, payload) => {\r\n      this.parkingSpaceStorage.rename(payload.id, payload.name);\r\n    });\r\n  },\r\n  computed: {\r\n    availableOnly: function () {\r\n      let data = [];\r\n      this.parkingSpaceStorage.storage.forEach((e) => {\r\n        if (e.available) data.push(e);\r\n      });\r\n      return data;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.maxh {\r\n  max-height: 75vh;\r\n}\r\n.resultTable {\r\n  position: relative;\r\n  /* padding-top: 204px; */\r\n}\r\n.batteryCarAlert {\r\n  width: 300px;\r\n}\r\n.showImg {\r\n  width: 100%;\r\n  padding: 2px;\r\n  text-align: center;\r\n  border: 1px solid rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 5px;\r\n  z-index: 999;\r\n}\r\n.showImg img {\r\n  height: 100%;\r\n  display: block;\r\n  margin: 0 auto;\r\n}\r\n.batteryCarImg {\r\n  width: 100px;\r\n  padding: 6px;\r\n  border: 1px solid rgba(0, 0, 0, 0);\r\n}\r\n.batteryCarImg img {\r\n  width: 100%;\r\n}\r\n</style>"]}]}